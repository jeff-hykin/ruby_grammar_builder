# What is this?

This is a library that is used to create textmate grammars, and its the backbone of the [Better C++ Syntax extension](https://marketplace.visualstudio.com/items?itemName=jeff-hykin.better-cpp-syntax)


# How do I use this?

Well... I would like to have a bunch of documentation explaining everything. However, documentation takes time. 

Here's a quick run down though.
```ruby
require "ruby_grammar_builder"

# create a new grammar
grammar = Grammar.new(
    name: "C++",
    scope_name: "source.cpp",
    fileTypes: [
		"cc",
		"cpp",
		"cp",
		"cxx",
		"c++",
		"C",
		"h",
		"hh",
		"hpp",
		"h++"
    ],
    version: "",
    information_for_contributors: [
        "This code was auto generated by a much-more-readable ruby file",
        "This file essentially an updated/improved fork of the atom syntax",
        "see https://github.com/jeff-hykin/better-cpp-syntax/blob/master",
    ],
)

# create a pattern for a keyword
grammar[:misc_keyword] = Pattern.new(
    match: /\bmisc\b/,
    tag_as: "keyword.other.misc",
    # these are some inline unit tests
    should_fully_match: [ "misc" ],
    should_partial_match: [ "misc.", "= misc", ],
    should_not_partial_match: [ "miscc", "Misc", "_misc" ],
)

# create a pattern-range for something like string quotes
grammar[:string] = PatternRange.new(
    tag_as: "string.quoted.double",
    start_pattern: Pattern.new(
        match: /"/,
        tag_as: 'punctuation.definition.string'
    ),
    end_pattern: Pattern.new(
        match: /"/,
        tag_as: 'punctuation.definition.string'
    ),
    includes: [
        # escape pattern
        Pattern.new(
            match: /\\./,
            tag_as: "constant.character.escape",
        ),
    ],
)


# 
# add them to "top level"
# 
grammar[:$initial_context] = [
    :misc_keyword, # <- first tries to find keyword
    :string,       # <- if that fails, it tries to find a string pattern
]


# 
# export to a file
# 
grammar.save_to(
    syntax_name: "demo_syntax",
    syntax_dir: "./syntaxes",
    tag_dir: "./demo_syntax",
)
```


# Setup

Everything is detailed in the `documentation/setup.md`!